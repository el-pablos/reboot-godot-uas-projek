[gd_scene load_steps=7 format=3 uid="uid://level_02_rust_factory"]

[ext_resource type="Script" path="res://scripts/levels/LevelBase.gd" id="1_level_script"]
[ext_resource type="Texture2D" path="res://assets/sprites/environment/ground_placeholder.svg" id="2_ground"]
[ext_resource type="PackedScene" path="res://scenes/player/Player.tscn" id="3_player"]
[ext_resource type="Texture2D" path="res://assets/sprites/environment/platform_placeholder.svg" id="4_platform"]
[ext_resource type="Script" path="res://scripts/collectibles/CoreFragment.gd" id="5_core_script"]
[ext_resource type="Script" path="res://scripts/hazards/MachinePress.gd" id="6_press_script"]

[node name="Level_02_RustFactory" type="Node2D"]
script = ExtResource("1_level_script")
level_name = "The Rust Factory"
level_description = "Pabrik berkarat dengan mesin press berbahaya. Boss: The Scrapper."
next_level_path = "res://scenes/levels/Level_03_CrystalLabs.tscn"
spawn_position = Vector2(100, 200)
killzone_y = 1000.0
background_color = Color(0.2, 0.15, 0.1, 1)

[node name="Background" type="ParallaxBackground" parent="."]

[node name="FactoryBG" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.2, 0.2)

[node name="BGRect" type="ColorRect" parent="Background/FactoryBG"]
offset_left = -2000.0
offset_top = -1000.0
offset_right = 4000.0
offset_bottom = 2000.0
color = Color(0.15, 0.1, 0.08, 1)

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.7, 0.65, 0.6, 1)

[node name="Environment" type="Node2D" parent="."]

[node name="Floor1" type="StaticBody2D" parent="Environment"]
position = Vector2(400, 400)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Floor1"]
scale = Vector2(25, 2)
modulate = Color(0.4, 0.35, 0.3, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Floor1"]
polygon = PackedVector2Array(-400, -32, 400, -32, 400, 32, -400, 32)

[node name="Platform1" type="StaticBody2D" parent="Environment"]
position = Vector2(300, 300)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Platform1"]
scale = Vector2(4, 1)
modulate = Color(0.5, 0.4, 0.35, 1)
texture = ExtResource("4_platform")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Platform1"]
polygon = PackedVector2Array(-128, -8, 128, -8, 128, 8, -128, 8)

[node name="Platform2" type="StaticBody2D" parent="Environment"]
position = Vector2(600, 250)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Platform2"]
scale = Vector2(4, 1)
modulate = Color(0.5, 0.4, 0.35, 1)
texture = ExtResource("4_platform")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Platform2"]
polygon = PackedVector2Array(-128, -8, 128, -8, 128, 8, -128, 8)

[node name="Floor2" type="StaticBody2D" parent="Environment"]
position = Vector2(1000, 400)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Floor2"]
scale = Vector2(20, 2)
modulate = Color(0.4, 0.35, 0.3, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Floor2"]
polygon = PackedVector2Array(-320, -32, 320, -32, 320, 32, -320, 32)

[node name="Floor3" type="StaticBody2D" parent="Environment"]
position = Vector2(1600, 350)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Floor3"]
scale = Vector2(15, 2)
modulate = Color(0.4, 0.35, 0.3, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Floor3"]
polygon = PackedVector2Array(-240, -32, 240, -32, 240, 32, -240, 32)

[node name="Hazards" type="Node2D" parent="."]

[node name="MachinePress1" type="Node2D" parent="Hazards"]
position = Vector2(500, 150)
script = ExtResource("6_press_script")
press_distance = 180.0

[node name="PressBody" type="StaticBody2D" parent="Hazards/MachinePress1"]
collision_layer = 4

[node name="Sprite" type="ColorRect" parent="Hazards/MachinePress1/PressBody"]
offset_left = -30.0
offset_top = -20.0
offset_right = 30.0
offset_bottom = 80.0
color = Color(0.6, 0.2, 0.1, 1)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/MachinePress1/PressBody"]
polygon = PackedVector2Array(-30, -20, 30, -20, 30, 80, -30, 80)

[node name="HazardArea" type="Area2D" parent="Hazards/MachinePress1"]
collision_layer = 8
collision_mask = 1

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/MachinePress1/HazardArea"]
polygon = PackedVector2Array(-30, 60, 30, 60, 30, 80, -30, 80)

[node name="MachinePress2" type="Node2D" parent="Hazards"]
position = Vector2(900, 150)
script = ExtResource("6_press_script")
press_distance = 180.0
press_delay = 2.0

[node name="PressBody" type="StaticBody2D" parent="Hazards/MachinePress2"]
collision_layer = 4

[node name="Sprite" type="ColorRect" parent="Hazards/MachinePress2/PressBody"]
offset_left = -30.0
offset_top = -20.0
offset_right = 30.0
offset_bottom = 80.0
color = Color(0.6, 0.2, 0.1, 1)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/MachinePress2/PressBody"]
polygon = PackedVector2Array(-30, -20, 30, -20, 30, 80, -30, 80)

[node name="HazardArea" type="Area2D" parent="Hazards/MachinePress2"]
collision_layer = 8
collision_mask = 1

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/MachinePress2/HazardArea"]
polygon = PackedVector2Array(-30, 60, 30, 60, 30, 80, -30, 80)

[node name="Collectibles" type="Node2D" parent="."]

[node name="CoreFragment" type="Area2D" parent="Collectibles"]
position = Vector2(1600, 270)
collision_layer = 16
collision_mask = 1
script = ExtResource("5_core_script")
core_id = 2

[node name="Sprite" type="Sprite2D" parent="Collectibles/CoreFragment"]
scale = Vector2(2, 2)
self_modulate = Color(1, 0.5, 0.2, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Collectibles/CoreFragment"]
polygon = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)

[node name="UI" type="CanvasLayer" parent="."]

[node name="LevelLabel" type="Label" parent="UI"]
offset_left = 50.0
offset_top = 50.0
offset_right = 450.0
offset_bottom = 100.0
text = "LEVEL 2 - THE RUST FACTORY
Hati-hati dengan mesin press!"

[node name="Player" parent="." instance=ExtResource("3_player")]
position = Vector2(100, 300)
