[gd_scene load_steps=7 format=3 uid="uid://level_05_overlord_fortress"]

[ext_resource type="Script" path="res://scripts/levels/LevelBase.gd" id="1_level_script"]
[ext_resource type="Texture2D" path="res://assets/sprites/environment/ground_placeholder.svg" id="2_ground"]
[ext_resource type="PackedScene" path="res://scenes/player/Player.tscn" id="3_player"]
[ext_resource type="Texture2D" path="res://assets/sprites/environment/platform_placeholder.svg" id="4_platform"]
[ext_resource type="Script" path="res://scripts/collectibles/CoreFragment.gd" id="5_core_script"]
[ext_resource type="Script" path="res://scripts/hazards/Hazard.gd" id="6_hazard_script"]

[node name="Level_05_OverlordFortress" type="Node2D"]
script = ExtResource("1_level_script")
level_name = "Benteng Overlord"
level_description = "Final level! Hadapi Overlord dan selamatkan Arcadia!"
next_level_path = ""
spawn_position = Vector2(100, 400)
killzone_y = 1200.0
background_color = Color(0.1, 0.05, 0.05, 1)

[node name="Background" type="ParallaxBackground" parent="."]

[node name="FortressBG" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.05, 0.05)

[node name="BGRect" type="ColorRect" parent="Background/FortressBG"]
offset_left = -2000.0
offset_top = -1500.0
offset_right = 4000.0
offset_bottom = 2500.0
color = Color(0.08, 0.02, 0.02, 1)

[node name="LavaGlow" type="ParallaxLayer" parent="Background"]
motion_scale = Vector2(0.2, 0.3)

[node name="Glow1" type="ColorRect" parent="Background/LavaGlow"]
offset_left = 0.0
offset_top = 800.0
offset_right = 2000.0
offset_bottom = 1200.0
color = Color(0.8, 0.2, 0.05, 0.4)

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.85, 0.7, 0.65, 1)

[node name="Environment" type="Node2D" parent="."]

[node name="StartPlatform" type="StaticBody2D" parent="Environment"]
position = Vector2(200, 500)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/StartPlatform"]
scale = Vector2(12, 2)
modulate = Color(0.3, 0.2, 0.2, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/StartPlatform"]
polygon = PackedVector2Array(-192, -32, 192, -32, 192, 32, -192, 32)

[node name="Platform1" type="StaticBody2D" parent="Environment"]
position = Vector2(500, 420)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Platform1"]
scale = Vector2(4, 1)
modulate = Color(0.35, 0.2, 0.2, 1)
texture = ExtResource("4_platform")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Platform1"]
polygon = PackedVector2Array(-128, -8, 128, -8, 128, 8, -128, 8)

[node name="Platform2" type="StaticBody2D" parent="Environment"]
position = Vector2(750, 350)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Platform2"]
scale = Vector2(3, 1)
modulate = Color(0.35, 0.2, 0.2, 1)
texture = ExtResource("4_platform")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Platform2"]
polygon = PackedVector2Array(-96, -8, 96, -8, 96, 8, -96, 8)

[node name="Platform3" type="StaticBody2D" parent="Environment"]
position = Vector2(1000, 400)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/Platform3"]
scale = Vector2(4, 1)
modulate = Color(0.35, 0.2, 0.2, 1)
texture = ExtResource("4_platform")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/Platform3"]
polygon = PackedVector2Array(-128, -8, 128, -8, 128, 8, -128, 8)

[node name="BossArena" type="StaticBody2D" parent="Environment"]
position = Vector2(1400, 450)
collision_layer = 4

[node name="Sprite" type="Sprite2D" parent="Environment/BossArena"]
scale = Vector2(20, 3)
modulate = Color(0.25, 0.15, 0.15, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Environment/BossArena"]
polygon = PackedVector2Array(-320, -48, 320, -48, 320, 48, -320, 48)

[node name="Hazards" type="Node2D" parent="."]

[node name="LavaPool1" type="Area2D" parent="Hazards"]
position = Vector2(400, 550)
collision_layer = 8
collision_mask = 1
script = ExtResource("6_hazard_script")
instant_kill = true

[node name="Sprite" type="ColorRect" parent="Hazards/LavaPool1"]
offset_left = -80.0
offset_top = -15.0
offset_right = 80.0
offset_bottom = 30.0
color = Color(1, 0.3, 0.05, 1)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/LavaPool1"]
polygon = PackedVector2Array(-80, -15, 80, -15, 80, 30, -80, 30)

[node name="LavaPool2" type="Area2D" parent="Hazards"]
position = Vector2(850, 520)
collision_layer = 8
collision_mask = 1
script = ExtResource("6_hazard_script")
instant_kill = true

[node name="Sprite" type="ColorRect" parent="Hazards/LavaPool2"]
offset_left = -100.0
offset_top = -15.0
offset_right = 100.0
offset_bottom = 40.0
color = Color(1, 0.35, 0.1, 1)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/LavaPool2"]
polygon = PackedVector2Array(-100, -15, 100, -15, 100, 40, -100, 40)

[node name="LaserTrap1" type="Area2D" parent="Hazards"]
position = Vector2(650, 300)
collision_layer = 8
collision_mask = 1
script = ExtResource("6_hazard_script")
damage = 35

[node name="Sprite" type="ColorRect" parent="Hazards/LaserTrap1"]
offset_left = -5.0
offset_top = -80.0
offset_right = 5.0
offset_bottom = 80.0
color = Color(1, 0.1, 0.1, 0.9)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Hazards/LaserTrap1"]
polygon = PackedVector2Array(-5, -80, 5, -80, 5, 80, -5, 80)

[node name="Collectibles" type="Node2D" parent="."]

[node name="CoreFragment" type="Area2D" parent="Collectibles"]
position = Vector2(1400, 350)
collision_layer = 16
collision_mask = 1
script = ExtResource("5_core_script")
core_id = 5
glow_color = Color(1, 0.2, 0.2, 1)

[node name="Sprite" type="Sprite2D" parent="Collectibles/CoreFragment"]
scale = Vector2(3, 3)
self_modulate = Color(1, 0.3, 0.3, 1)
texture = ExtResource("2_ground")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Collectibles/CoreFragment"]
polygon = PackedVector2Array(-24, -24, 24, -24, 24, 24, -24, 24)

[node name="UI" type="CanvasLayer" parent="."]

[node name="LevelLabel" type="Label" parent="UI"]
offset_left = 50.0
offset_top = 50.0
offset_right = 550.0
offset_bottom = 120.0
text = "FINAL LEVEL - BENTENG OVERLORD
Ini pertempuran terakhir! Ambil Core terakhir
dan hadapi Overlord untuk menyelamatkan Arcadia!"

[node name="Player" parent="." instance=ExtResource("3_player")]
position = Vector2(100, 400)
